{"ast":null,"code":"var _jsxFileName = \"C:\\\\SDP_team_project\\\\airline-reservation-system_sdp\\\\src\\\\pages\\\\registeredCustomer\\\\pages\\\\weather\\\\components\\\\LocationSearchBar.js\";\nimport React from 'react';\nimport { LocationSearchAPI } from '../APIKeys.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass LocationSearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      if (e.target.value.length > 0) {\n        this.setState({\n          queryText: e.target.value,\n          showList: true\n        });\n        this.fetchDataByText(e.target.value);\n      } else {\n        this.setState({\n          data: null,\n          queryText: \"\"\n        });\n      }\n    };\n\n    this.toggleDropdown = showList => {\n      this.setState({\n        showList\n      });\n    };\n\n    this.handleClick = featureIndex => {\n      let features = this.state.data.features[featureIndex];\n      let longitude = features.geometry.coordinates[0];\n      let latitude = features.geometry.coordinates[1];\n      this.props.setLatLong(latitude, longitude);\n      this.setState({\n        queryText: features.text\n      });\n      this.toggleDropdown(false);\n      this.props.setCity(features.text);\n    };\n\n    this.handleBlur = () => {\n      setTimeout(() => {\n        this.toggleDropdown(false);\n      }, 100);\n    };\n\n    this.fetchDataByText = queryText => {\n      const url = 'https://api.mapbox.com/geocoding/v5/mapbox.places/' + queryText + '.json?access_token=' + LocationSearchAPI;\n      fetch(url).then(results => results.json()).then(sdata => {\n        this.setState({\n          data: sdata\n        });\n      });\n    };\n\n    this.state = {\n      data: null,\n      queryText: \"\",\n      showList: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"locationSearchBar\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"location-search-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          onChange: this.handleChange,\n          value: this.state.queryText,\n          onBlur: this.handleBlur,\n          placeholder: \"Search for location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this), this.state.showList && /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"searchList\",\n          children: this.state.data && this.state.data.features && this.state.data.features.length > 0 && this.state.data.features.map((data, index) => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"options\",\n              onClick: () => {\n                this.handleClick(index);\n              },\n              children: data[\"place_name\"]\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default LocationSearchBar;","map":{"version":3,"sources":["C:/SDP_team_project/airline-reservation-system_sdp/src/pages/registeredCustomer/pages/weather/components/LocationSearchBar.js"],"names":["React","LocationSearchAPI","LocationSearchBar","Component","constructor","props","handleChange","e","target","value","length","setState","queryText","showList","fetchDataByText","data","toggleDropdown","handleClick","featureIndex","features","state","longitude","geometry","coordinates","latitude","setLatLong","text","setCity","handleBlur","setTimeout","url","fetch","then","results","json","sdata","render","map","index"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { LocationSearchAPI } from '../APIKeys.js';\r\n\r\nclass LocationSearchBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: null,\r\n      queryText: \"\",\r\n      showList: false,\r\n    };\r\n  }\r\n\r\n  handleChange = (e) => {\r\n\r\n    if (e.target.value.length > 0) {\r\n      this.setState({\r\n        queryText: e.target.value,\r\n        showList: true,\r\n      });\r\n      this.fetchDataByText(e.target.value);\r\n    } else {\r\n      this.setState({\r\n        data: null,\r\n        queryText: \"\",\r\n      });\r\n    }\r\n  };\r\n\r\n  toggleDropdown = (showList) => {\r\n    this.setState({ showList });\r\n  }\r\n\r\n  handleClick = (featureIndex) => {\r\n    let features = this.state.data.features[featureIndex];\r\n    let longitude = features.geometry.coordinates[0];\r\n    let latitude = features.geometry.coordinates[1];\r\n\r\n    this.props.setLatLong(latitude, longitude);\r\n    this.setState({ queryText: features.text });\r\n    this.toggleDropdown(false);\r\n    this.props.setCity(features.text);\r\n  }\r\n\r\n  handleBlur = () => {\r\n    setTimeout(() => {\r\n      this.toggleDropdown(false);\r\n    }, 100)\r\n  }\r\n\r\n  fetchDataByText = (queryText) => {\r\n    const url = 'https://api.mapbox.com/geocoding/v5/mapbox.places/' + queryText + '.json?access_token=' + LocationSearchAPI;\r\n\r\n    fetch(url)\r\n      .then(results => results.json())\r\n      .then((sdata) => {\r\n        this.setState({\r\n          data: sdata,\r\n        });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"locationSearchBar\">\r\n        <div className=\"location-search-container\">\r\n          <input type=\"text\" onChange={this.handleChange} value={this.state.queryText} onBlur={this.handleBlur}\r\n            placeholder=\"Search for location\"\r\n          />\r\n          {this.state.showList &&\r\n            <ul className=\"searchList\">\r\n\r\n              {/* {options} */}\r\n              {this.state.data && this.state.data.features && this.state.data.features.length > 0 &&\r\n                this.state.data.features.map((data, index) => {\r\n                  return (\r\n                    <li key={index}\r\n                      className=\"options\"\r\n                      onClick={() => {\r\n                        this.handleClick(index)\r\n                      }}\r\n                    >\r\n                      {data[\"place_name\"]}\r\n                    </li>\r\n                  )\r\n                })\r\n              }\r\n            </ul>\r\n          }\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default LocationSearchBar;"]},"metadata":{},"sourceType":"module"}